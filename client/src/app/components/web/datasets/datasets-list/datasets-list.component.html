<div class="container">
    <h1 translate>TITLE_DATACENTER</h1>
    <div class="ui-g">
        <div *ngIf="selectedSearchOption == 'busqueda-libre'" class="ui-g-8">
            <b>DATOS CON EL TEXTO </b>
            <input type="text" (keyup.enter)="searchDatasetsByText(searchInput.value)" value="{{searchValue}}" #searchInput>
            <img src="../../../../../assets/lupa.jpg" alt="BUSCAR DATOS" (click)="searchDatasetsByText(searchInput.value)"/>
        </div>
        <div *ngIf="selectedSearchOption == 'tema-y-tipo'" class="ui-g-4">
            <b>Datos sobre </b>
            <p-dropdown [options]="topicsSelect" [(ngModel)]="selectedTopic" placeholder="Seleccione un tema" [style]="{'width':'200px'}"
                (onChange)="setTopicData()"></p-dropdown>
        </div>
        <div *ngIf="selectedSearchOption == 'organizacion-y-tipo'" class="ui-g-4">
                <b>Datos sobre </b>
                <p-dropdown [options]="orgsSelect" [(ngModel)]="selectedOrg" placeholder="Seleccione organización" [style]="{'width':'200px'}"
                    (onChange)="searchDatasetsetByOrg()"></p-dropdown>
            </div>
        <div *ngIf="selectedSearchOption == 'tema-y-tipo' || selectedSearchOption == 'organizacion-y-tipo'" class="ui-g-4">
            <b>Del tipo </b>
            <p-dropdown [options]="datasetTypes" [(ngModel)]="selectedDatasetTypeDropdown" placeholder="Selecciona un tipo" [style]="{'width':'200px'}"></p-dropdown>
        </div>
        <div class="ui-g-4">
            <p-dropdown [options]="searchOptions" [(ngModel)]="selectedSearchOption" placeholder="Selecciona una búsqueda" [style]="{'width':'250px'}" ></p-dropdown>
        </div>
    </div>
   
    <p-dataTable [value]="datasets" [responsive]="true" (onSort)="setOrder($event)" #dt>
        <p-column field="name" header="{{numDatasets}} conjuntos de datos encontrados" sortable="custom" sortFunction="orderTable($event)">
            <ng-template pTemplate="body" let-dataset="rowData">
                <a routerLink='/datos/catalogo/{{dataset.name}}' (click)="showDataset(dataset)">
                        {{dataset.title}}
                    </a>
            </ng-template>
        </p-column>
        <p-column field="accesos" header="Nº de accesos" [style]="{'width':'160px'}" sortable="custom" [sortable]="true">
            <ng-template pTemplate="body" let-dataset="rowData">
                {{dataset.tracking_summary.total}}
            </ng-template>
        </p-column>
        <p-column field="lastUpdate" header="Última actualización" [style]="{'width':'220px'}" sortable="custom" [sortable]="true">
            <ng-template pTemplate="body" let-dataset="rowData">
                {{dataset.metadata_modified | date: 'dd/MM/yyyy'}}
            </ng-template>
        </p-column>
    </p-dataTable>
    <p-paginator rows="{{pageRows}}" totalRecords="{{numDatasets}}" (onPageChange)="paginate($event)"></p-paginator>
    <div class="nota">
        <p>
            <i class="fa fa-star" id="informacion_content_3_i" style="color: #5ea2ba;"></i> Se ha accedido al conjunto de
            datos más de 10 veces en los últimos 14 días.
        </p>
    </div>
    <div class="destacado" style="width: 100%;">
        <h1>Datos destacados</h1>
        <h3 style="color: grey">Permítenos recomendarte algunos datos abiertos</h3>
        <div class="ui-g ">
            <div class="ui-sm-12 ui-lg-4">
                <div class="box">
                    <div class="boxTitle">
                        <h3>NUEVOS DATOS</h3>
                    </div>
                    <div class="boxContent">
                        <div>
                            <div *ngFor="let newDataset of newestDatasets">
                                <a routerLink='/datos/catalogo/{{newDataset.name}}' (click)="showDataset(newDataset)" class="textosNormales">
                                    {{newDataset.title}}
                                </a>
                                <div *ngIf="newestDatasets.indexOf(newDataset) != 2" class="separadorVentana"></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="ui-sm-12 ui-lg-4">
                <div class="box">
                    <div class="boxTitle">
                        <h3>MÁS DESCARGADOS</h3>
                    </div>
                    <div class="boxContent">
                        <div>
                            <div *ngFor="let downloadedDataset of downloadedDatasets">
                                <a routerLink='/datos/catalogo/{{downloadedDataset.name}}' (click)="showDataset(downloadedDataset)" class="textosNormales">
                                    {{downloadedDataset.title}}
                                </a>
                                <div *ngIf="downloadedDatasets.indexOf(downloadedDataset) != 2" class="separadorVentana"></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="ui-sm-12 ui-lg-4">
                <div class="box">
                    <div class="boxTitle">
                        <h3>ESTADÍSTICAS</h3>
                    </div>
                    <div class="boxContent">
                        <div>
                            <h6>Número de datasets</h6>
                            <p class="counter">{{datasetCount}}</p>
                        </div>
                        <div class="separadorVentana"></div>
                        <div>
                            <h6>Número de recursos</h6>
                            <img src="../../../assets/numResources.png" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>