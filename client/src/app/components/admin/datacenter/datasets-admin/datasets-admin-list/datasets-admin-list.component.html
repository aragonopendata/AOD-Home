<div class="container">
	<!--<div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
		<i class="fa fa-search" style="margin:4px 4px 0 0"></i>
		<input #gb type="text" pInputText size="50" placeholder="Global Filter">
	</div>
	<p-dataTable [value]="datasets" [paginator]="true" rows="15" [responsive]="true" [globalFilter]="gb" #dt>
		<p-column field="title" header="Nombre" [sortable]="true"></p-column>
		<p-column field="metadata_modified" header="Última actualización" [sortable]="true">
			<ng-template pTemplate="body" let-dataset="rowData">
				{{dataset?.metadata_modified | date: 'dd/MM/yyyy'}}
			</ng-template>
		</p-column>
		<p-column header="Edición">
			<ng-template pTemplate="body" let-dataset="rowData">
				<button pButton type="button" icon="fa-search" routerLink="../showdataset" (click)="showDataset(dataset)"></button>
				<button pButton type="button" icon="fa-edit" routerLink="../editdataset" (click)="showDataset(dataset)"></button>
				<button pButton type="button" icon="fa-trash"></button>
			</ng-template>
		</p-column>
		<p-footer>
			<div class="ui-helper-clearfix" style="width:100%">
				<button type="button" pButton icon="fa-plus" (click)="addDataset()" style="float:left" routerLink="../editdataset" label="Añade un conjunto de datos"></button>
			</div>
		</p-footer>
	</p-dataTable> -->

	<!-- Dialogs -->
	<p-dialog header="¿Está seguro de que deasea borrar el dataset?" [(visible)]="displayDeleteDialog">
		<p>Se va a proceder a borrar el dataset <b>{{datasetTitleDelete}}</b></p>
		<p>¿Desea continuar?</p>
			 <p-footer>
				 <button type="button" pButton icon="fa-check" (click)="deleteDataset()" label="Sí"></button>
				 <button type="button" pButton icon="fa-close" (click)="undoDeleteDataset()" label="No"></button>
			 </p-footer>
	</p-dialog>
	<p-growl [(value)]="msgs"></p-growl>


	<div class="row">
        <div class="col-12" >
            <div class="form-group">
                <label>Buscar</label>
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar por..." [value]="searchValue" (keyup.enter)="searchDatasetsByText(searchInput.value)" #searchInput>
                        <span class="input-group-btn">
                            <button class="btn btn-secondary" type="button" (click)="searchDatasetsByText(searchInput.value)" ><i class="fa fa-search" aria-hidden="true"></i></button>
                        </span>
                    </div>                
            </div>
		</div>
	</div>
	
	<div *ngIf="showProgressBar" class="progress">
			<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
	</div>
	<p-dataTable *ngIf="datasets" [value]="datasets" [responsive]="true" emptyMessage="{{emptyMessage}}" (onSort)="setOrder($event)" #dt>
		<p-column field="name" [style]="{'width':'55%'}" header="{{numDatasets}} conjuntos de datos encontrados" sortable="custom" sortFunction="orderTable($event)">
			<ng-template pTemplate="body" let-dataset="rowData">
					{{dataset.title}}
				<i class="fa fa-star" id="informacion_content_3_i" style="color: #5ea2ba;" *ngIf="dataset.tracking_summary && (dataset.tracking_summary.recent > 10)"></i>
			</ng-template>
		</p-column>
		<p-column field="accesos" header="Nº de accesos" [style]="{'width':'15%'}" sortable="custom" sortFunction="orderTable($event)">
			<ng-template pTemplate="body" let-dataset="rowData">					
				{{dataset?.tracking_summary?.total || '0'}}
			</ng-template>
		</p-column>
		<p-column field="lastUpdate" header="Última actualización" [style]="{'width':'18%'}" sortable="custom" sortFunction="orderTable($event)">
			<ng-template pTemplate="body" let-dataset="rowData">
				{{dataset.metadata_modified | date: 'dd/MM/yyyy'}}
			</ng-template>
		</p-column>
		<p-column header="edit" header="Edición" [style]="{'width':'12%'}">
			<ng-template pTemplate="body" let-dataset="rowData">
				<button pButton type="button" icon="fa-search" routerLink="/{{routerLinkAdminDatacenterDatasetsShow}}/{{dataset.name}}" (click)="showDataset(dataset)"></button>
				<button pButton type="button" icon="fa-edit" routerLink="/{{routerLinkAdminDatacenterDatasetsEdit}}/{{dataset.name}}" (click)="showDataset(dataset)"></button>
				<button pButton type="button" icon="fa-trash" (click)="showDeleteDialog(dataset.title,dataset.name)"></button>
			</ng-template>
		</p-column>
		<p-footer>
			<div class="ui-helper-clearfix" style="width:100%">
				<button class="btn btn-primary" type="button" icon="fa-plus" (click)="addDataset()" style="float:left" routerLink="/{{routerLinkAdminDatacenterDatasetsEdit}}" >
					<i class="fa fa-plus"></i> Añade un conjunto de datos
				</button>
			</div>
		</p-footer>
	</p-dataTable>
	<nav aria-label="Pagination">
		<ul class="pagination justify-content-center">
			<li [ngClass]="actualPage >= 1 ? 'page-item': 'page-item disabled'">
				<a class="page-link" (click)="paginate(+pageFirst+1)" aria-label="Primero">
			<i class="fa fa-fast-backward" ></i>
			</a>
			</li>
			<li [ngClass]="actualPage >= 1 ? 'page-item': 'page-item disabled'">
				<a class="page-link" (click)="paginate(+actualPage)" aria-label="Anterior">
			<i class="fa fa-step-backward"></i>
			</a>
			</li>
			<li *ngFor="let pageShow of pagesShow" [ngClass]="pageShow == '-' ? 'page-item disabled' : (pageShow == (+actualPage+1) ? 'page-item active': 'page-item')">
				<a class="page-link" (click)="paginate(pageShow)">{{pageShow}}</a>
			</li>
			<li [ngClass]="actualPage < (+pageLast-1) ? 'page-item': 'page-item disabled'">
				<a class="page-link" (click)="paginate(+actualPage+2)" aria-label="Siguiente">
				<i class="fa fa-step-forward"></i>
				</a>
			</li>
			<li [ngClass]="actualPage < (+pageLast-1) ? 'page-item': 'page-item disabled'">
				<a class="page-link" (click)="paginate(pageLast)" aria-label="Ultimo">
				<i class="fa fa-fast-forward"></i>
				</a>
			</li>
		</ul>
	</nav>
</div>